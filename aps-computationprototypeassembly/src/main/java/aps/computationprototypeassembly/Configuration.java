package aps.computationprototypeassembly;

import java.util.*;

public class Configuration {


    float secPerPix;
    float[] actuatorPositionsX;
    float[] actuatorPositionsY;
    int[] mirrorConfig;



    public Configuration() {

        secPerPix = (float)(12825.0 * 13E-6);

        mirrorConfig = new int[36];
        for (int i=0; i<36; i++) {
            mirrorConfig[i] = 1;
        }
        // 108 actuator positions
        String actsString = 
                       "'0, 2029323,' ||" +
                       "'-407445, 1323607,' ||" +
                       "'407445, 1323607,' ||" +
                       "'-1757445, 1014661,' ||" +
                       "'-1350000,  308946,' ||" +
                       "'-942555, 1014661,' ||" +
                       "'-1350000, -308946,' ||" +
                       "'-1757445, -1014661,' ||" +
                       "'-942555, -1014661,' ||" +
                       "'-407445, -1323607,' ||" +
                       "'0, -2029323,' ||" +
                       "'407445, -1323607,' ||" +
                       "'1350000, -308946,' ||" +
                       "'942555, -1014661,' ||" +
                       "'1757445, -1014661,' ||" +
                       "'942555, 1014661,' ||" +
                       "'1350000,  308946,' ||" +
                       "'1757445, 1014661,' ||" +
                       "'0, 3588168,' ||" +
                       "'-407445, 2882453,' ||" +
                       "'407445, 2882453,' ||" +
                       "'-1757445, 2573507,' ||" +
                       "'-1350000, 1867792,' ||" +
                       "'-942555, 2573507,' ||" +
                       "'-3107445, 1794084,' ||" +
                       "'-2700000, 1088369,' ||" +
                       "'-2292555, 1794084,' ||" +
                       "'-2700000,  470477,' ||" +
                       "'-3107445, -235239,' ||" +
                       "'-2292555, -235238,' ||" +
                       "'-2700000, -1088369,' ||" +
                       "'-3107445, -1794084,' ||" +
                       "'-2292555, -1794084,' ||" +
                       "'-1757445, -2103030,' ||" +
                       "'-1350000, -2808746,' ||" +
                       "'-942555, -2103030,' ||" +
                       "'-407445, -2882453,' ||" +
                       "'0, -3588168,' ||" +
                       "'407445, -2882453,' ||" +
                       "'1350000, -1867792,' ||" +
                       "'942555, -2573507,' ||" +
                       "'1757445, -2573507,' ||" +
                       "'2700000, -1088369,' ||" +
                       "'2292555, -1794084,' ||" +
                       "'3107445, -1794084,' ||" +
                       "'2292555,  235239,' ||" +
                       "'2700000, -470477,' ||" +
                       "'3107445,  235239,' ||" +
                       "'2292555, 1794084,' ||" +
                       "'2700000, 1088369,' ||" +
                       "'3107445, 1794084,' ||" +
                       "'1350000, 2808746,' ||" +
                       "'942555, 2103030,' ||" +
                       "'1757445, 2103030,' ||" +
                       "'0, 5147014,' ||" +
                       "'-407445, 4441298,' ||" +
                       "'407445, 4441298,' ||" +
                       "'-1350000, 4367591,' ||" +
                       "'-1757445, 3661876,' ||" +
                       "'-942555, 3661876,' ||" +
                       "'-3107445, 3352930,' ||" +
                       "'-2700000, 2647214,' ||" +
                       "'-2292555, 3352930,' ||" +
                       "'-4457445, 2573507,' ||" +
                       "'-4050000, 1867792,' ||" +
                       "'-3642555, 2573507,' ||" +
                       "'-4457445, 1014661,' ||" +
                       "'-4050000,  308946,' ||" +
                       "'-3642555, 1014661,' ||" +
                       "'-4050000, -308946,' ||" +
                       "'-4457445, -1014661,' ||" +
                       "'-3642555, -1014661,' ||" +
                       "'-4050000, -1867792,' ||" +
                       "'-4457445, -2573507,' ||" +
                       "'-3642555, -2573507,' ||" +
                       "'-2700000, -2647214,' ||" +
                       "'-3107445, -3352930,' ||" +
                       "'-2292555, -3352930,' ||" +
                       "'-1757445, -3661876,' ||" +
                       "'-1350000, -4367591,' ||" +
                       "'-942555, -3661876,' ||" +
                       "'-407445, -4441298,' ||" +
                       "'0, -5147014,' ||" +
                       "'407445, -4441298,' ||" +
                       "'942555, -3661876,' ||" +
                       "'1350000, -4367591,' ||" +
                       "'1757445, -3661876,' ||" +
                       "'2700000, -2647214,' ||" +
                       "'2292555, -3352930,' ||" +
                       "'3107445, -3352930,' ||" +
                       "'4050000, -1867792,' ||" +
                       "'3642555, -2573507,' ||" +
                       "'4457445, -2573507,' ||" +
                       "'4050000, -308946,' ||" +
                       "'3642555, -1014661,' ||" +
                       "'4457445, -1014661,' ||" +
                       "'3642555, 1014661,' ||" +
                       "'4050000,  308946,' ||" +
                       "'4457445, 1014661,' ||" +
                       "'3642555, 2573507,' ||" +
                       "'4050000, 1867792,' ||" +
                       "'4457445, 2573507,' ||" +
                       "'2292555, 3352930,' ||" +
                       "'2700000, 2647214,' ||" +
                       "'3107445, 3352930,' ||" +
                       "'1350000, 4367591,' ||" +
                       "'942555, 3661876,' ||" +
                       "'1757445, 3661876' ||";
        SplitArray xyArray = splitToFloatArrays(actsString);
        actuatorPositionsX = xyArray.xArray;
        actuatorPositionsY = xyArray.yArray;
    }

    private class SplitArray {
        public float[] xArray;
        public float[] yArray;
    }

    public SplitArray splitToFloatArrays(String input) {

            String cleaned = input
                    .replace("'", "")
                    .replace("||", "")
                    .trim();

            String[] tokens = cleaned.split(",");

            List<Float> xList = new ArrayList<>();
            List<Float> yList = new ArrayList<>();

            for (int i = 0; i < tokens.length - 1; i += 2) {
                String xVal = tokens[i].trim();
                String yVal = tokens[i + 1].trim();

                if (!xVal.isEmpty() && !yVal.isEmpty()) {
                    xList.add(Float.parseFloat(xVal));
                    yList.add(Float.parseFloat(yVal));
                }
            }

            float[] x = new float[xList.size()];
            float[] y = new float[yList.size()];

            for (int i = 0; i < xList.size(); i++) {
                x[i] = xList.get(i);
                y[i] = yList.get(i);
            }

            SplitArray splitArray = new SplitArray();
            splitArray.xArray = x;
            splitArray.yArray = y;

            return splitArray;
        }

    }


